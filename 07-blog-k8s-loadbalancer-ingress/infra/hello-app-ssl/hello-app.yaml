apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-app
  namespace: default
spec:
  selector:
    matchLabels:
      app: hello
  replicas: 2
  template:
    metadata:
      labels:
        app: hello
    spec:
      containers:
      - name: hello
        image: "gcr.io/google-samples/hello-app:2.0"
---
apiVersion: v1
kind: Service
metadata:
  name: hello-service
  namespace: default
  labels:
    app: hello
spec:
  type: ClusterIP
  selector:
    app: hello
  ports:
  - port: 80
    targetPort: 8080
    protocol: TCP
--- 
apiVersion: v1
kind: Secret
metadata:
  name: hello-app-tls
  namespace: default
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVoakNDQXU2Z0F3SUJBZ0lSQVB4ZHZjZUNDT2FCeHVtZ2g0RVRMeVl3RFFZSktvWklodmNOQVFFTEJRQXcKZ2E4eEhqQWNCZ05WQkFvVEZXMXJZMlZ5ZENCa1pYWmxiRzl3YldWdWRDQkRRVEZDTUVBR0ExVUVDd3c1YTJWeQpaM0pwZEhKdlltdHZjRUJMWlhKbmNtbDBjeTFOWVdOQ2IyOXJMVkJ5Ynk1c2IyTmhiQ0FvUzJWeVozSnBkQ0JTCmIySnJiM0FwTVVrd1J3WURWUVFEREVCdGEyTmxjblFnYTJWeVozSnBkSEp2WW10dmNFQkxaWEpuY21sMGN5MU4KWVdOQ2IyOXJMVkJ5Ynk1c2IyTmhiQ0FvUzJWeVozSnBkQ0JTYjJKcmIzQXBNQjRYRFRJek1EVXpNREF6TlRBeApPVm9YRFRJMU1EZ3pNREF6TlRBeE9Wb3diVEVuTUNVR0ExVUVDaE1lYld0alpYSjBJR1JsZG1Wc2IzQnRaVzUwCklHTmxjblJwWm1sallYUmxNVUl3UUFZRFZRUUxERGxyWlhKbmNtbDBjbTlpYTI5d1FFdGxjbWR5YVhSekxVMWgKWTBKdmIyc3RVSEp2TG14dlkyRnNJQ2hMWlhKbmNtbDBJRkp2WW10dmNDa3dnZ0VpTUEwR0NTcUdTSWIzRFFFQgpBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRRGJyUXVrK0NJVUNSbURhS0JUb3d2UWFML3JhRktaOGtuZXFvaDAvT1g5CkVJVFJDcmpXandUSVlRMnlxL3E2SDdKaVBSellPNnMzUVJ5UXhzYzc2cm9teHM1UjlXc000RHBYM3UyK2p3aHkKUlNlZ1ZJdnRkTklqemJXdVptWVk5ckxTT2NPZ2xzLzZCRzZITmdYUHR3Qno3UjZqSmc0dHpEMHR1ck5RakZ0eQplS0ZJU2JoelJ3VDQ3R0VmNlNnZzVydzlQd3dpbmp3TXpjd3pHQXNSR2RDdGZDeFozYUdObkRFUVlvTEE1M09SCmd4RVljcUxEQ2M4ZC9vTGRQV1krSlYxdlBFMkxJQzFxL3pwU0lXY0w1cFBWR24wN0lQQmlhVUQvUXFhZFhteDMKN25wWkNOMG5TMzljeGpMT2tDY3M1djlYZm1XckdRcXcrbUNCaGFqcVpWcjlBZ01CQUFHalhqQmNNQTRHQTFVZApEd0VCL3dRRUF3SUZvREFUQmdOVkhTVUVEREFLQmdnckJnRUZCUWNEQVRBZkJnTlZIU01FR0RBV2dCU0dxbmZHCjdyUmlqOEhIZTByaDFqT2M3cnZMMWpBVUJnTlZIUkVFRFRBTGdnbG9aV3hzYnk1aGNIQXdEUVlKS29aSWh2Y04KQVFFTEJRQURnZ0dCQURtOHlKVTBWRWJINnZ3QmJPOU9McFZYV3dKVUVlYStkUm11YnZ3TjZVN2NZUHIwaXhLSApHeWwzYmxPOWFtdHU4K1dEZWhXcHFET1JaL25qSXh5NjBKN3NBV1RBaGxQaVFNdXhOWFI5OE9jeC81V3NvdDhzClA5bi80a1VIaytleHVmWHVjK2RHV0llUTFVQWthbGlsOXIwOVZlZk9QMEZ2RGsvdGI2RWtBRkZveUpacE1NUHcKeDRFT0VJTkZvUW1yVDhVclZ1K0luaUhPUDNYVmFscXpMUXBtdVphTFJ5akFPeENNQnFScTh5TGIzSTU4OEJIcQphK01RZTlQVzlHVGVMd3JxcE9IQnZ4U1hocEtNbHh4bEFqeHBDbHdCckU4SytGUVVBU3VDUUJENmtLanhOcDhqCjUwOEZJajhYY0owK0dtM0ZsT0NXREowcVlkeUgwQ0JhbDhxb1NXM2hoNUFWb3QzdTJwM2hrR0JTZHRRVTZpNGoKWmlnaVZUNjdsYyt3My9UR2puZXgzWmhwUzlEM0JnYWlOQWVtVk4rajRuODBHRTZzaTJWbVl2aHpabUQ4MnNkawptZCtOeWRzTE4reENza3g2SUhZMEJ1RHBmbXFCZERDMk9WK2x1b21hWStMZ2lkME9TTlNNS3dCZG81L2FTRVZqCjBXa1VNYkFxUmZvRjhRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRGJyUXVrK0NJVUNSbUQKYUtCVG93dlFhTC9yYUZLWjhrbmVxb2gwL09YOUVJVFJDcmpXandUSVlRMnlxL3E2SDdKaVBSellPNnMzUVJ5UQp4c2M3NnJvbXhzNVI5V3NNNERwWDN1Mitqd2h5UlNlZ1ZJdnRkTklqemJXdVptWVk5ckxTT2NPZ2xzLzZCRzZICk5nWFB0d0J6N1I2akpnNHR6RDB0dXJOUWpGdHllS0ZJU2JoelJ3VDQ3R0VmNlNnZzVydzlQd3dpbmp3TXpjd3oKR0FzUkdkQ3RmQ3haM2FHTm5ERVFZb0xBNTNPUmd4RVljcUxEQ2M4ZC9vTGRQV1krSlYxdlBFMkxJQzFxL3pwUwpJV2NMNXBQVkduMDdJUEJpYVVEL1FxYWRYbXgzN25wWkNOMG5TMzljeGpMT2tDY3M1djlYZm1XckdRcXcrbUNCCmhhanFaVnI5QWdNQkFBRUNnZ0VCQUpXdzIwaDAxVFAxNTI3R01zb0xScGVqYVhRT1NJc2lzUGVNR1NRdTJNR1QKS2c0UVVsZlNhUjNxRkoxMTE0cFE0d3RTUFgrVFdWNXpmZldobmszVDZ6bFZLMjVwMzZLTWdQVXpzYW15YWIwRQpKclo0SmttTzIwc09lQWo1T2dVMHhqRytydkdWRXU5NWFaKzFUa3gybFZacGRBRVVnNER0dFpxZHFHYnczYmVuCi9BTk5OV3k0ZmJldHdNVDl5Ny93K2FQSVFJTHBmUnI1WEkzQzEzMHc4cEJZeklRUjFCWWJLeHNEcHM1VmFXTjgKaWNoRWpqN3FZVDd1MVJRQngwblplSndzd1k5bTFnblhsUFo2VXBFMHBoQmRSSmFQdGorRnp2WTRpQkM2RGdYMgpScnlpcEwwZkIyWUltQmpOK0EzZTY1dy9Fc2RzK2pSOEVIQ2R6TFJOaHNFQ2dZRUE0SldTbUZaTEhtR3BIR2EvCnYvRnBhMDdtNTZHUzMwQXBKTlgvTjNNaHpKbUJFZFhnamFUc1M0QnJLc2dqQXpHZTUydHA1dUxQOU5rSGJUcm8KaWRnYVh4YmYwenpiMncrN21lZjVqdEF5RUt2YTFyem9odFZiekFRNXpWL21hTjhDd1FmWXJxV0Q1TENacXN4ZwpRSStZbXZ4UkkyOWxJREtBRU52RGlIb2lwd1VDZ1lFQSttZTBjekE0KzdoQUZ4RFVwM05NNFJrVEhGV2FsUUphCmhqd3ZSM3MwWnl4ZTBnZUk5ZE5NUDR5bUF6a2tQY2xHOHR1SXF2ckpYcFFTbHJsazI4Z1pGTTZVWHVkWUZ5WFgKQU9GTmw3WWUxNVU2bjQ3SkVta2NHRWxna0tNWDFLTVF4a1JyZTFXczd3OUcxTDhqMHNmMktUbVVwNllpQ2VCbwoxVk1QZnU2RnRaa0NnWUJWTGtYNHc1b2dQdGhlYmxaQ0hmVm0vdmt6VjZRV1N3YVA4eDZtMEdNOGIraDFkRktFClJzNWM0S3RGQWIzTjQwOHE1U0c0c2NSQVVPU3hPRXVrcExOejU0QWpaWXpaN0lDeUlqc1VRTUVNYzdKQUNreUQKZjM4ZXhXZUxEdG1jWXlGdlIyT1c4aTR4V2c0ZXF2L0MzUFA3ck1HMWwvV2FIYTFYTjVOVk8wWFRaUUtCZ0Z1aQpmYysxY3ZUekRVa2ptSjZhdkNTWDEzMkQraWpUanFzVzlUcFVaTzNvdDk1bWNZRjhUS2ZvNFl2R2FuUE41NC9TCk5PWlZGa0h0TUF4R1ZobHoxWEhlMHo4VHJCSDBnQVRMYm1pNWRmbndtMTV1a3ppUWpINTZ3OExLWEZzdFBXTkIKQUpCRzN4MHcydnZaNHRNczUvRllLQVZkNzVEcnRaRnpidlZGZGxycEFvR0JBS2hSNzBheEx4dWdZUTZveGYyTQpST2FrTzBBeEYrM1U1YjlMVkRCblRPTnFZd3JqMUFEc2dCNFdQWXR5clozS3BxM2lnRE5jQU5WNldQRWlFQ0JvCkV6Mkw0UVVnU1JlTVZUL1orY0xQRGxtOERuOW5QakwvaHdkQkR2NkF5T0xqTzF6UTVsOEV5WVpRUTZUUDdyTk8KVFZFWU5NVE43UVlObXRteVpRYmc3S0hDCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: hello-app-ingress
  namespace: default
spec:
  ingressClassName: nginx
  tls:
  - hosts:
    - hello.app
    secretName: hello-app-tls
  rules:
  - host: "hello.app"
    http:
      paths:
        - pathType: Prefix
          path: "/"
          backend:
            service:
              name: hello-service
              port:
                number: 80